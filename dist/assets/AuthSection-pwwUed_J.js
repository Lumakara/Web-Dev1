import{j as e,k as $e,L as Le,l as Ae,m as Pe}from"./ui-vendor-q7wFqjOa.js";import{j as Re,r as t,L as $}from"./react-core-uW5GauGR.js";import{c as L,B as G}from"./index-CL1up3YA.js";import{I as j,T as re}from"./badge-DJZPaMpK.js";import{L as w}from"./label-C8Dy0a63.js";import{C as Fe,c as Me}from"./card-Cmhyo_6H.js";import{C as ie}from"./checkbox-DrMCNYIb.js";import{u as Te}from"./App-BA4Lo1Iq.js";import{u as Ie,a as o}from"./appStore-DZKr_UpI.js";import{t as f}from"./notifications-Bi33bcEl.js";import{k as ne,F as Ke,ah as Oe,ai as De,G as Ue,R as q,aj as We,ak as le,X as E,N as oe,J as de,K as ce,c as Ge,U as qe,al as Be,Z as ze,o as me,n as Ze}from"./icons-Bd72YT1L.js";import"./utils-CUtzRjuR.js";import"./firebase-BZSrvpf7.js";import"./NotFound-CrDRqvXg.js";import"./state-BjmFXnif.js";function Ve({className:s,...r}){return e.jsx($e,{"data-slot":"tabs",className:L("flex flex-col gap-2",s),...r})}function _e({className:s,...r}){return e.jsx(Le,{"data-slot":"tabs-list",className:L("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...r})}function ue({className:s,...r}){return e.jsx(Ae,{"data-slot":"tabs-trigger",className:L("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...r})}function ge({className:s,...r}){return e.jsx(Pe,{"data-slot":"tabs-content",className:L("flex-1 outline-none",s),...r})}const Je=s=>{let r=0;s.length>=8&&r++,/[A-Z]/.test(s)&&r++,/[0-9]/.test(s)&&r++,/[^A-Za-z0-9]/.test(s)&&r++;const d=["Sangat Lemah","Lemah","Sedang","Kuat","Sangat Kuat"],c=["bg-red-500","bg-orange-500","bg-yellow-500","bg-blue-500","bg-green-500"];return{strength:r,label:d[r],color:c[r]}},Xe=()=>{const[s,r]=t.useState(navigator.onLine);return t.useEffect(()=>{const d=()=>r(!0),c=()=>r(!1);return window.addEventListener("online",d),window.addEventListener("offline",c),()=>{window.removeEventListener("online",d),window.removeEventListener("offline",c)}},[]),s},B=s=>{const r={"auth/network-request-failed":"Koneksi internet terputus. Periksa koneksi Anda dan coba lagi.","auth/user-not-found":"Email tidak terdaftar. Silakan daftar terlebih dahulu.","auth/wrong-password":"Password salah. Silakan coba lagi.","auth/invalid-email":"Format email tidak valid.","auth/email-already-in-use":"Email sudah terdaftar. Gunakan email lain atau login.","auth/weak-password":"Password terlalu lemah. Minimal 8 karakter.","auth/too-many-requests":"Terlalu banyak percobaan. Silakan coba lagi nanti.","auth/popup-closed-by-user":"Login dibatalkan. Silakan coba lagi.","auth/cancelled-popup-request":"Popup login diblokir. Izinkan popup untuk melanjutkan.","auth/invalid-credential":"Kredensial tidak valid. Periksa email dan password Anda."};for(const[d,c]of Object.entries(r))if(s.includes(d))return c;return"Terjadi kesalahan. Silakan coba lagi."};function ua(){const{isDarkMode:s}=Ie(),{signInWithGoogle:r,signInWithEmail:d,registerWithEmail:c,isLoading:n}=Te(),A=Re(),g=Xe(),[he,xe]=t.useState("login"),[p,z]=t.useState(!1),[Z,l]=t.useState(null),[h,P]=t.useState(0),[R,V]=t.useState(!1),[x,_]=t.useState(""),[y,be]=t.useState(""),[J,X]=t.useState(!1),[F,M]=t.useState(""),[T,I]=t.useState(""),[N,fe]=t.useState(""),[k,pe]=t.useState(""),[b,ve]=t.useState(""),[H,je]=t.useState(""),[Q,we]=t.useState(!1),[K,Y]=t.useState(""),[O,D]=t.useState(""),[U,C]=t.useState(""),S=Je(b);t.useEffect(()=>{l(null),M(""),I("")},[x,y]),t.useEffect(()=>{l(null),Y(""),D(""),C("")},[N,k,b]);const ee=a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),W=async a=>{if(h>=3){l("Gagal terhubung. Silakan refresh halaman atau coba lagi nanti.");return}V(!0),P(u=>u+1);const i=Math.pow(2,h)*1e3;await new Promise(u=>setTimeout(u,i));try{await a(),P(0)}catch{}finally{V(!1)}},ae=async()=>{if(!g){l("Koneksi internet terputus. Periksa koneksi Anda.");return}o.playClick();try{l(null);const a=await r();f.success("Login berhasil!",{icon:e.jsx(me,{className:"h-4 w-4"})}),await re.sendLoginNotification({id:a.uid,email:a.email||"",name:a.displayName||"User",role:"user",avatar:a.photoURL||void 0},{device:navigator.userAgent.includes("Mobile")?"Mobile":"Desktop",browser:navigator.userAgent.includes("Chrome")?"Chrome":navigator.userAgent.includes("Firefox")?"Firefox":navigator.userAgent.includes("Safari")?"Safari":"Unknown",os:navigator.userAgent.includes("Windows")?"Windows":navigator.userAgent.includes("Mac")?"macOS":navigator.userAgent.includes("Linux")?"Linux":"Unknown"}),o.playSuccess(),A("/")}catch(a){const i=B(a.message||a.toString());l(i),o.playRemove(),a.message?.includes("network-request-failed")&&h<3&&(f.info("Mencoba menghubungkan kembali..."),W(()=>ae()))}},ye=()=>{let a=!0;return x?ee(x)||(M("Format email tidak valid"),a=!1):(M("Email wajib diisi"),a=!1),y?y.length<6&&(I("Password minimal 6 karakter"),a=!1):(I("Password wajib diisi"),a=!1),a},se=async a=>{if(a.preventDefault(),!g){l("Koneksi internet terputus. Periksa koneksi Anda.");return}if(!ye()){o.playRemove();return}o.playClick();try{l(null);const i=await d(x,y);J?localStorage.setItem("rememberedEmail",x):localStorage.removeItem("rememberedEmail"),f.success("Login berhasil!",{icon:e.jsx(me,{className:"h-4 w-4"})}),await re.sendLoginNotification({id:i.uid,email:i.email||x,name:i.displayName||"User",role:"user"},{device:navigator.userAgent.includes("Mobile")?"Mobile":"Desktop",browser:navigator.userAgent.includes("Chrome")?"Chrome":navigator.userAgent.includes("Firefox")?"Firefox":navigator.userAgent.includes("Safari")?"Safari":"Unknown",os:navigator.userAgent.includes("Windows")?"Windows":navigator.userAgent.includes("Mac")?"macOS":navigator.userAgent.includes("Linux")?"Linux":"Unknown"}),o.playSuccess(),A("/")}catch(i){const u=B(i.message||i.toString());l(u),o.playRemove(),i.message?.includes("network-request-failed")&&h<3&&(f.info("Mencoba menghubungkan kembali..."),W(()=>se(a)))}},Ne=()=>{let a=!0;return(!N||N.length<2)&&(Y("Nama minimal 2 karakter"),a=!1),k?ee(k)||(D("Format email tidak valid"),a=!1):(D("Email wajib diisi"),a=!1),b?b.length<8?(C("Password minimal 8 karakter"),a=!1):S.strength<2&&(C("Password terlalu lemah"),a=!1):(C("Password wajib diisi"),a=!1),Q||(f.error("Anda harus menyetujui syarat dan ketentuan"),a=!1),a},te=async a=>{if(a.preventDefault(),!g){l("Koneksi internet terputus. Periksa koneksi Anda.");return}if(!Ne()){o.playRemove();return}o.playClick();try{l(null),await c(k,b,N,H),f.success("Akun berhasil dibuat! Selamat datang!",{icon:e.jsx(Ze,{className:"h-4 w-4"}),duration:4e3}),o.playSuccess(),A("/")}catch(i){const u=B(i.message||i.toString());l(u),o.playRemove(),i.message?.includes("network-request-failed")&&h<3&&(f.info("Mencoba menghubungkan kembali..."),W(()=>te(a)))}};t.useEffect(()=>{const a=localStorage.getItem("rememberedEmail");a&&(_(a),X(!0))},[]);const ke=s?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-blue-50 via-white to-orange-50",Se=s?"bg-gray-800/90 border-gray-700":"bg-white/90 border-white/50",Ee=s?"text-white":"text-gray-800",Ce=s?"text-gray-400":"text-gray-600",v=s?"bg-gray-700/50 border-gray-600 text-white placeholder:text-gray-500":"bg-white border-gray-200",m=s?"text-gray-500":"text-gray-400";return e.jsxs("div",{className:`min-h-screen ${ke} flex items-center justify-center p-4 relative overflow-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:`absolute -top-40 -right-40 w-96 h-96 rounded-full blur-3xl opacity-20 animate-pulse ${s?"bg-blue-600":"bg-blue-400"}`}),e.jsx("div",{className:`absolute -bottom-40 -left-40 w-96 h-96 rounded-full blur-3xl opacity-20 animate-pulse ${s?"bg-orange-600":"bg-orange-400"}`,style:{animationDelay:"1s"}})]}),e.jsxs("div",{className:"w-full max-w-md relative z-10",children:[e.jsxs("div",{className:"text-center mb-8 animate-fade-in",children:[e.jsx("div",{className:`w-24 h-24 mx-auto rounded-2xl flex items-center justify-center shadow-2xl mb-4 animate-float ${s?"bg-gradient-to-r from-blue-600 to-blue-500":"bg-gradient-to-r from-blue-600 to-orange-500"}`,children:e.jsx(ne,{className:"text-white w-12 h-12"})}),e.jsx("h1",{className:`text-3xl font-bold ${Ee} mb-2`,children:"Selamat Datang"}),e.jsx("p",{className:Ce,children:"Masuk untuk mengakses layanan terbaik kami"})]}),!g&&e.jsxs("div",{className:"mb-4 p-4 rounded-xl bg-red-500/10 border border-red-500/20 text-red-500 flex items-center gap-3 animate-shake",children:[e.jsx(Ke,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Koneksi Terputus"}),e.jsx("p",{className:"text-sm opacity-80",children:"Periksa koneksi internet Anda"})]})]}),e.jsx(Fe,{className:`${Se} shadow-2xl backdrop-blur-xl border animate-fade-in-scale`,children:e.jsx(Me,{className:"p-6",children:e.jsxs(Ve,{value:he,onValueChange:xe,className:"w-full",children:[e.jsxs(_e,{className:`grid w-full grid-cols-2 mb-6 p-1 ${s?"bg-gray-700/50":"bg-gray-100"}`,children:[e.jsxs(ue,{value:"login",className:`data-[state=active]:shadow-lg transition-all duration-300 ${s?"data-[state=active]:bg-gray-600 data-[state=active]:text-white":""}`,children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Masuk"]}),e.jsxs(ue,{value:"register",className:`data-[state=active]:shadow-lg transition-all duration-300 ${s?"data-[state=active]:bg-gray-600 data-[state=active]:text-white":""}`,children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Daftar"]})]}),Z&&e.jsxs("div",{className:"mb-4 p-4 rounded-xl bg-red-500/10 border border-red-500/20 text-red-500 flex items-start gap-3 animate-shake",children:[e.jsx(Ue,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm",children:Z}),h>0&&h<3&&e.jsx("button",{onClick:()=>P(0),className:"text-xs underline mt-1 hover:no-underline",children:"Coba lagi"})]})]}),e.jsxs(G,{variant:"outline",className:`w-full mb-4 h-12 font-medium transition-all duration-300 hover:scale-[1.02] active:scale-[0.98] ${s?"border-gray-600 hover:bg-gray-700 hover:border-gray-500":"hover:bg-gray-50"}`,onClick:ae,disabled:n||R||!g,children:[n||R?e.jsx(q,{className:"h-5 w-5 mr-2 animate-spin"}):e.jsx(We,{className:"h-5 w-5 mr-2"}),R?"Menghubungkan...":"Lanjutkan dengan Google"]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:`w-full border-t ${s?"border-gray-700":"border-gray-200"}`})}),e.jsx("div",{className:"relative flex justify-center text-xs",children:e.jsx("span",{className:`px-2 ${s?"bg-gray-800 text-gray-500":"bg-white text-gray-500"}`,children:"atau gunakan email"})})]}),e.jsx(ge,{value:"login",className:"animate-fade-in",children:e.jsxs("form",{onSubmit:se,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"login-email",className:s?"text-gray-300":"",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(le,{className:`absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 ${m}`}),e.jsx(j,{id:"login-email",type:"email",placeholder:"nama@email.com",className:`pl-10 h-12 ${v} ${F?"border-red-500 focus-visible:ring-red-500":""} transition-all duration-300`,value:x,onChange:a=>_(a.target.value),disabled:n})]}),F&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3"})," ",F]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(w,{htmlFor:"login-password",className:s?"text-gray-300":"",children:"Password"}),e.jsx($,{to:"#",className:"text-xs text-blue-500 hover:text-blue-600 hover:underline",children:"Lupa password?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:`absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 ${m}`}),e.jsx(j,{id:"login-password",type:p?"text":"password",placeholder:"••••••••",className:`pl-10 pr-12 h-12 ${v} ${T?"border-red-500 focus-visible:ring-red-500":""} transition-all duration-300`,value:y,onChange:a=>be(a.target.value),disabled:n}),e.jsx("button",{type:"button",onClick:()=>z(!p),className:`absolute right-3 top-1/2 -translate-y-1/2 ${m} hover:text-gray-600 transition-colors`,tabIndex:-1,children:p?e.jsx(de,{className:"h-4 w-4"}):e.jsx(ce,{className:"h-4 w-4"})})]}),T&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3"})," ",T]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{id:"remember",checked:J,onCheckedChange:a=>X(a)}),e.jsx("label",{htmlFor:"remember",className:`text-sm cursor-pointer ${s?"text-gray-400":"text-gray-600"}`,children:"Ingat saya"})]}),e.jsx(G,{type:"submit",className:"w-full h-12 bg-gradient-to-r from-blue-600 to-orange-500 hover:from-blue-700 hover:to-orange-600 text-white font-semibold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50",disabled:n||!g,children:n?e.jsx(q,{className:"h-5 w-5 animate-spin"}):e.jsxs(e.Fragment,{children:["Masuk",e.jsx(Ge,{className:"h-4 w-4 ml-2"})]})})]})}),e.jsx(ge,{value:"register",className:"animate-fade-in",children:e.jsxs("form",{onSubmit:te,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"reg-name",className:s?"text-gray-300":"",children:"Nama Lengkap"}),e.jsxs("div",{className:"relative",children:[e.jsx(qe,{className:`absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 ${m}`}),e.jsx(j,{id:"reg-name",type:"text",placeholder:"John Doe",className:`pl-10 h-12 ${v} ${K?"border-red-500 focus-visible:ring-red-500":""} transition-all duration-300`,value:N,onChange:a=>fe(a.target.value),disabled:n})]}),K&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3"})," ",K]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"reg-email",className:s?"text-gray-300":"",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(le,{className:`absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 ${m}`}),e.jsx(j,{id:"reg-email",type:"email",placeholder:"nama@email.com",className:`pl-10 h-12 ${v} ${O?"border-red-500 focus-visible:ring-red-500":""} transition-all duration-300`,value:k,onChange:a=>pe(a.target.value),disabled:n})]}),O&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3"})," ",O]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"reg-password",className:s?"text-gray-300":"",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:`absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 ${m}`}),e.jsx(j,{id:"reg-password",type:p?"text":"password",placeholder:"Minimal 8 karakter",className:`pl-10 pr-12 h-12 ${v} ${U?"border-red-500 focus-visible:ring-red-500":""} transition-all duration-300`,value:b,onChange:a=>ve(a.target.value),disabled:n}),e.jsx("button",{type:"button",onClick:()=>z(!p),className:`absolute right-3 top-1/2 -translate-y-1/2 ${m} hover:text-gray-600 transition-colors`,tabIndex:-1,children:p?e.jsx(de,{className:"h-4 w-4"}):e.jsx(ce,{className:"h-4 w-4"})})]}),b&&e.jsxs("div",{className:"space-y-1 animate-fade-in",children:[e.jsx("div",{className:"flex gap-1 h-1",children:[1,2,3,4].map(a=>e.jsx("div",{className:`flex-1 rounded-full transition-all duration-300 ${a<=S.strength?S.color:s?"bg-gray-700":"bg-gray-200"}`},a))}),e.jsxs("p",{className:`text-xs ${s?"text-gray-400":"text-gray-500"}`,children:["Kekuatan: ",e.jsx("span",{className:S.color.replace("bg-","text-"),children:S.label})]})]}),U&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3"})," ",U]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"reg-phone",className:s?"text-gray-300":"",children:"Nomor Telepon (Opsional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:`absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 ${m}`}),e.jsx(j,{id:"reg-phone",type:"tel",placeholder:"0812-3456-7890",className:`pl-10 h-12 ${v} transition-all duration-300`,value:H,onChange:a=>je(a.target.value),disabled:n})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-blue-500/5 border border-blue-500/10",children:[e.jsx(ie,{id:"agree-terms",checked:Q,onCheckedChange:a=>we(a),className:"mt-0.5"}),e.jsxs("label",{htmlFor:"agree-terms",className:`text-sm leading-relaxed ${s?"text-gray-400":"text-gray-600"}`,children:["Saya menyetujui"," ",e.jsx($,{to:"#",className:"text-blue-500 hover:text-blue-600 hover:underline font-medium",children:"Syarat dan Ketentuan"})," ","serta"," ",e.jsx($,{to:"#",className:"text-blue-500 hover:text-blue-600 hover:underline font-medium",children:"Kebijakan Privasi"})]})]}),e.jsx(G,{type:"submit",className:"w-full h-12 bg-gradient-to-r from-blue-600 to-orange-500 hover:from-blue-700 hover:to-orange-600 text-white font-semibold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50",disabled:n||!g,children:n?e.jsx(q,{className:"h-5 w-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"h-4 w-4 mr-2"}),"Buat Akun"]})})]})})]})})}),e.jsxs("p",{className:`text-center mt-6 text-sm ${s?"text-gray-400":"text-gray-600"} animate-fade-in`,children:["Atau"," ",e.jsx($,{to:"/",className:"text-blue-500 hover:text-blue-600 hover:underline font-medium transition-colors",children:"lanjutkan sebagai tamu"})]}),e.jsxs("div",{className:`mt-6 flex items-center justify-center gap-2 text-xs ${s?"text-gray-500":"text-gray-400"} animate-fade-in`,children:[e.jsx(ne,{className:"h-4 w-4"}),e.jsx("span",{children:"Terlindungi dengan enkripsi SSL 256-bit"})]})]})]})}export{ua as AuthSection,ua as default};
