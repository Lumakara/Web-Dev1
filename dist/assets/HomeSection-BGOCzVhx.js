import{j as e}from"./ui-vendor-q7wFqjOa.js";import{r as l,j as A}from"./react-core-uW5GauGR.js";import{B as k}from"./index-CL1up3YA.js";import{I as E,B as S}from"./badge-DJZPaMpK.js";import{u as R}from"./useProducts-ILBgL--I.js";import{u as P,a as p}from"./appStore-DZKr_UpI.js";import{S as $,X as w,aa as q,n as z,ab as F,P as T,m as K,x as V,Z as M,k as Q,j as W,a6 as Z}from"./icons-Bd72YT1L.js";import"./utils-CUtzRjuR.js";import"./firebase-BZSrvpf7.js";import"./state-BjmFXnif.js";const _=[{id:"all",label:"Semua",icon:z},{id:"installation",label:"Instalasi",icon:F},{id:"creative",label:"Kreatif",icon:T},{id:"technical",label:"Teknis",icon:K}];function J(s,a){return s.rating>=4.8&&s.reviews>100?{type:"bestseller",label:"‚≠ê Best Seller",color:"bg-yellow-500 text-white"}:s.base_price<a*.7?{type:"cheap",label:"üí∞ Termurah",color:"bg-green-500 text-white"}:s.reviews>150?{type:"trending",label:"üî• Trending",color:"bg-orange-500 text-white"}:s.created_at&&new Date(s.created_at).getTime()>Date.now()-10080*60*1e3?{type:"new",label:"‚ú® Baru",color:"bg-blue-500 text-white"}:null}function I(s){return`Rp ${s.toLocaleString("id-ID")}`}const X=l.memo(function({product:a,avgPrice:r,isDarkMode:o}){const n=A(),{cart:i}=P(),m=a.discount_price||a.base_price,c=a.discount_price&&a.discount_price<a.base_price,u=c?Math.round((a.base_price-(a.discount_price||0))/a.base_price*100):0,g=l.useMemo(()=>J(a,r),[a,r]),b=l.useMemo(()=>i.find(f=>f.productId===a.id),[i,a.id]),x=l.useCallback(()=>{p.playClick(),n(`/product/${a.id}`)},[n,a.id]);return e.jsxs("div",{onClick:x,className:`
        rounded-xl shadow-sm overflow-hidden cursor-pointer
        transform transition-transform duration-150 active:scale-95
        hover:shadow-md
        ${o?"bg-gray-800":"bg-white"}
      `,style:{willChange:"transform",contentVisibility:"auto"},children:[e.jsxs("div",{className:"relative aspect-square bg-gray-100 dark:bg-gray-700",children:[e.jsx("img",{src:a.icon,alt:a.title,className:"w-full h-full object-cover",loading:"lazy",decoding:"async"}),g&&e.jsx("div",{className:`absolute top-2 left-2 px-2 py-0.5 rounded text-[10px] font-bold ${g.color} shadow-sm`,children:g.label}),c&&e.jsxs("div",{className:"absolute top-2 right-2 px-2 py-0.5 rounded text-[10px] font-bold bg-red-500 text-white shadow-sm",children:["-",u,"%"]}),b&&e.jsx("div",{className:"absolute bottom-2 right-2 w-6 h-6 bg-blue-600 text-white text-xs font-bold rounded-full flex items-center justify-center shadow-sm",children:b.quantity}),a.stock<20&&e.jsx("div",{className:"absolute bottom-2 left-2 px-2 py-0.5 rounded text-[10px] font-bold bg-orange-500 text-white shadow-sm",children:"Stok Terbatas"})]}),e.jsxs("div",{className:"p-2.5",children:[e.jsx("h3",{className:`font-semibold text-sm truncate ${o?"text-white":"text-gray-900"}`,children:a.title}),e.jsx("p",{className:`text-xs line-clamp-1 mt-0.5 ${o?"text-gray-400":"text-gray-500"}`,children:a.description}),e.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-blue-600 font-bold text-sm",children:I(m)}),c&&e.jsx("span",{className:`text-[10px] line-through ${o?"text-gray-500":"text-gray-400"}`,children:I(a.base_price)})]}),e.jsxs("div",{className:"flex items-center text-yellow-500 text-xs",children:[e.jsx(Z,{className:"h-3 w-3 fill-current"}),e.jsx("span",{className:"ml-0.5",children:a.rating})]})]})]})]})}),D=l.memo(function(){const[a,r]=l.useState(0),o=l.useMemo(()=>[{title:"Layanan Digital Profesional",subtitle:"Solusi lengkap untuk kebutuhan teknologi Anda",gradient:"from-blue-600 via-blue-500 to-cyan-400",icon:M},{title:"Instalasi Wi-Fi & CCTV",subtitle:"Jaringan aman dan terpercaya",gradient:"from-orange-500 via-orange-400 to-yellow-400",icon:Q},{title:"Editing Kreatif",subtitle:"Photo & video editing profesional",gradient:"from-purple-600 via-purple-500 to-pink-400",icon:T},{title:"Support Teknis 24/7",subtitle:"Tim ahli siap membantu",gradient:"from-green-600 via-green-500 to-emerald-400",icon:W}],[]);return l.useEffect(()=>{const n=setInterval(()=>{r(i=>(i+1)%o.length)},5e3);return()=>clearInterval(n)},[o.length]),e.jsxs("div",{className:"relative h-40 overflow-hidden bg-gray-900",children:[o.map((n,i)=>{const m=n.icon,c=i===a;return e.jsx("div",{className:`absolute inset-0 flex items-center justify-center bg-gradient-to-r ${n.gradient} px-6 transition-opacity duration-500 ${c?"opacity-100":"opacity-0 pointer-events-none"}`,children:e.jsxs("div",{className:"text-center text-white max-w-md",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-2 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(m,{className:"h-6 w-6"})}),e.jsx("h2",{className:"text-lg font-bold",children:n.title}),e.jsx("p",{className:"text-white/80 mt-1 text-xs",children:n.subtitle})]})},i)}),e.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-1.5",children:o.map((n,i)=>e.jsx("button",{onClick:()=>r(i),className:`h-1.5 rounded-full transition-all ${a===i?"bg-white w-4":"bg-white/50 w-1.5"}`},i))})]})});function G({isDarkMode:s}){return e.jsxs("div",{className:`rounded-xl overflow-hidden ${s?"bg-gray-800":"bg-white"}`,children:[e.jsx("div",{className:`aspect-square ${s?"bg-gray-700":"bg-gray-200"} animate-pulse`}),e.jsxs("div",{className:"p-2.5 space-y-2",children:[e.jsx("div",{className:`h-4 ${s?"bg-gray-700":"bg-gray-200"} rounded animate-pulse w-3/4`}),e.jsx("div",{className:`h-3 ${s?"bg-gray-700":"bg-gray-200"} rounded animate-pulse w-full`}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:`h-4 ${s?"bg-gray-700":"bg-gray-200"} rounded animate-pulse w-1/3`}),e.jsx("div",{className:`h-4 ${s?"bg-gray-700":"bg-gray-200"} rounded animate-pulse w-1/4`})]})]})]})}function ne(){const{products:s,isLoading:a}=R(),{isDarkMode:r}=P(),[o,n]=l.useState(""),[i,m]=l.useState(""),[c,u]=l.useState("all"),[g,b]=l.useState(!1),x=l.useRef(null);l.useEffect(()=>{const t=setTimeout(()=>b(!0),100);return()=>clearTimeout(t)},[]);const f=l.useMemo(()=>s.length===0?0:s.reduce((t,d)=>t+d.base_price,0)/s.length,[s]),y=l.useCallback(()=>{m(o),p.playClick()},[o]),B=l.useCallback(t=>{t.key==="Enter"&&y()},[y]),L=l.useCallback(t=>{p.playClick(),u(t)},[]),j=l.useMemo(()=>{if(!s.length)return[];let t=s;if(c!=="all"&&(t=t.filter(d=>d.category===c)),i.trim()){const d=i.toLowerCase();t=t.filter(h=>h.title.toLowerCase().includes(d)||h.description.toLowerCase().includes(d)||h.tags.some(H=>H.toLowerCase().includes(d)))}return t},[s,c,i]),v=l.useCallback(()=>{p.playClick(),u("all"),n(""),m("")},[]),N=l.useCallback(t=>{x.current&&x.current.scrollBy({left:t==="left"?-200:200,behavior:"smooth"})},[]),C=l.useMemo(()=>[c!=="all",i].filter(Boolean).length,[c,i]);return e.jsxs("div",{className:`pb-20 min-h-screen ${r?"bg-gray-900":"bg-gray-50"}`,children:[g&&e.jsx(D,{}),e.jsxs("div",{className:`sticky top-[60px] z-30 px-4 py-3 ${r?"bg-gray-900/95":"bg-white/95"} backdrop-blur-sm shadow-sm`,children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx($,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(E,{placeholder:"Cari layanan...",className:`pl-9 pr-10 ${r?"bg-gray-800 border-gray-700 text-white":""}`,value:o,onChange:t=>n(t.target.value),onKeyDown:B}),o&&e.jsx("button",{onClick:()=>{n(""),m("")},className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx(w,{className:"h-4 w-4 text-gray-400"})})]}),e.jsx(k,{onClick:y,className:"bg-blue-600 hover:bg-blue-700 text-white px-4",children:"Cari"})]}),e.jsxs("div",{className:"relative mt-3",children:[e.jsx("button",{onClick:()=>N("left"),className:`absolute left-0 top-1/2 -translate-y-1/2 z-10 w-7 h-7 shadow rounded-full flex items-center justify-center ${r?"bg-gray-800 text-white":"bg-white"}`,children:e.jsx(q,{className:"h-4 w-4"})}),e.jsx("div",{ref:x,className:"flex gap-2 overflow-x-auto scrollbar-hide px-9 py-1",children:_.map(t=>{const d=t.icon,h=c===t.id;return e.jsxs("button",{onClick:()=>L(t.id),className:`
                    flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm whitespace-nowrap transition-colors
                    ${h?"bg-gradient-to-r from-blue-600 to-orange-500 text-white shadow-md":r?"bg-gray-800 text-gray-300":"bg-gray-100 text-gray-700"}
                  `,children:[e.jsx(d,{className:"h-3.5 w-3.5"}),t.label]},t.id)})}),e.jsx("button",{onClick:()=>N("right"),className:`absolute right-0 top-1/2 -translate-y-1/2 z-10 w-7 h-7 shadow rounded-full flex items-center justify-center ${r?"bg-gray-800 text-white":"bg-white"}`,children:e.jsx(V,{className:"h-4 w-4"})})]}),C>0&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[c!=="all"&&e.jsxs(S,{variant:"secondary",className:`flex items-center gap-1 ${r?"bg-gray-800":""}`,children:[_.find(t=>t.id===c)?.label,e.jsx(w,{className:"h-3 w-3 cursor-pointer",onClick:()=>u("all")})]}),i&&e.jsxs(S,{variant:"secondary",className:`flex items-center gap-1 ${r?"bg-gray-800":""}`,children:['"',i,'"',e.jsx(w,{className:"h-3 w-3 cursor-pointer",onClick:()=>{m(""),n("")}})]}),e.jsx("button",{onClick:v,className:"text-xs text-blue-500 hover:underline",children:"Hapus semua"})]}),e.jsx("p",{className:`text-xs mt-2 ${r?"text-gray-400":"text-gray-500"}`,children:a?"Memuat...":`Menampilkan ${j.length} produk`})]}),e.jsx("div",{className:"px-4 py-4",children:a?e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[1,2,3,4,5,6].map(t=>e.jsx(G,{isDarkMode:r},t))}):j.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center ${r?"bg-gray-800":"bg-gray-100"}`,children:e.jsx($,{className:`h-6 w-6 ${r?"text-gray-600":"text-gray-400"}`})}),e.jsx("p",{className:r?"text-gray-400":"text-gray-500",children:"Tidak ada layanan yang ditemukan"}),C>0&&e.jsx(k,{variant:"outline",className:"mt-4",onClick:v,children:"Hapus Filter"})]}):e.jsx("div",{className:"grid grid-cols-2 gap-3",style:{contentVisibility:"auto"},children:j.map(t=>e.jsx(X,{product:t,avgPrice:f,isDarkMode:r},t.id))})})]})}export{ne as HomeSection,ne as default};
